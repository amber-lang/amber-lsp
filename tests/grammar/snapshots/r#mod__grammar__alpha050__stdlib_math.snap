---
source: tests/grammar/alpha050.rs
expression: parse_unwrap(&tokenize(&stdlib))
---
[
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Sums an array's contents",
                        ),
                        0..29,
                    ),
                ),
                0..29,
            ),
        ),
        0..29,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    29..49,
                ),
            ],
            (
                true,
                50..53,
            ),
            (
                "fun",
                54..57,
            ),
            (
                "math_sum",
                58..66,
            ),
            [
                (
                    Generic(
                        (
                            false,
                            67..67,
                        ),
                        (
                            "list",
                            67..71,
                        ),
                    ),
                    67..71,
                ),
            ],
            None,
            [
                (
                    VariableInit(
                        (
                            "let",
                            79..82,
                        ),
                        (
                            "sum",
                            83..86,
                        ),
                        (
                            Expression(
                                (
                                    Int(
                                        (
                                            0,
                                            89..90,
                                        ),
                                    ),
                                    89..90,
                                ),
                            ),
                            89..90,
                        ),
                    ),
                    79..90,
                ),
                (
                    IterLoop(
                        (
                            "for",
                            95..98,
                        ),
                        (
                            Single(
                                (
                                    "item",
                                    99..103,
                                ),
                            ),
                            99..103,
                        ),
                        (
                            "in",
                            104..106,
                        ),
                        (
                            Var(
                                (
                                    "list",
                                    107..111,
                                ),
                            ),
                            107..111,
                        ),
                        (
                            Singleline(
                                (
                                    ShorthandAdd(
                                        (
                                            "sum",
                                            113..116,
                                        ),
                                        (
                                            Var(
                                                (
                                                    "item",
                                                    120..124,
                                                ),
                                            ),
                                            120..124,
                                        ),
                                    ),
                                    113..124,
                                ),
                            ),
                            111..124,
                        ),
                    ),
                    95..124,
                ),
                (
                    Return(
                        (
                            "return",
                            129..135,
                        ),
                        Some(
                            (
                                Var(
                                    (
                                        "sum",
                                        136..139,
                                    ),
                                ),
                                136..139,
                            ),
                        ),
                    ),
                    129..139,
                ),
            ],
        ),
        29..141,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns a number, rounded to the nearest integer",
                        ),
                        143..196,
                    ),
                ),
                143..196,
            ),
        ),
        143..196,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    196..216,
                ),
            ],
            (
                true,
                217..220,
            ),
            (
                "fun",
                221..224,
            ),
            (
                "math_round",
                225..235,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            236..236,
                        ),
                        (
                            "number",
                            236..242,
                        ),
                        (
                            Num,
                            244..247,
                        ),
                    ),
                    236..247,
                ),
            ],
            Some(
                (
                    Int,
                    250..253,
                ),
            ),
            [
                (
                    IfCondition(
                        (
                            "if",
                            260..262,
                        ),
                        (
                            IfCondition(
                                (
                                    Gt(
                                        (
                                            Var(
                                                (
                                                    "number",
                                                    263..269,
                                                ),
                                            ),
                                            263..269,
                                        ),
                                        (
                                            Int(
                                                (
                                                    0,
                                                    272..273,
                                                ),
                                            ),
                                            272..273,
                                        ),
                                    ),
                                    263..273,
                                ),
                                (
                                    Block(
                                        [],
                                        [
                                            (
                                                Return(
                                                    (
                                                        "return",
                                                        284..290,
                                                    ),
                                                    Some(
                                                        (
                                                            Cast(
                                                                (
                                                                    Command(
                                                                        [
                                                                            (
                                                                                Trust,
                                                                                291..296,
                                                                            ),
                                                                        ],
                                                                        [
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                297..298,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "echo",
                                                                                ),
                                                                                299..303,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                304..305,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "(",
                                                                                ),
                                                                                305..306,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "number",
                                                                                                307..313,
                                                                                            ),
                                                                                        ),
                                                                                        307..313,
                                                                                    ),
                                                                                ),
                                                                                306..314,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "+",
                                                                                ),
                                                                                314..315,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "0",
                                                                                ),
                                                                                315..316,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    ".",
                                                                                ),
                                                                                316..317,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "5",
                                                                                ),
                                                                                317..318,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    ")",
                                                                                ),
                                                                                318..319,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "/",
                                                                                ),
                                                                                319..320,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "1",
                                                                                ),
                                                                                320..321,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                321..322,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "|",
                                                                                ),
                                                                                323..324,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "bc",
                                                                                ),
                                                                                325..327,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                328..329,
                                                                            ),
                                                                        ],
                                                                        [],
                                                                    ),
                                                                    291..329,
                                                                ),
                                                                (
                                                                    "as",
                                                                    330..332,
                                                                ),
                                                                (
                                                                    Int,
                                                                    333..336,
                                                                ),
                                                            ),
                                                            291..336,
                                                        ),
                                                    ),
                                                ),
                                                284..336,
                                            ),
                                        ],
                                    ),
                                    274..342,
                                ),
                            ),
                            263..342,
                        ),
                        [],
                        None,
                    ),
                    260..342,
                ),
                (
                    Return(
                        (
                            "return",
                            348..354,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Trust,
                                                    355..360,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    361..362,
                                                ),
                                                (
                                                    Text(
                                                        "echo",
                                                    ),
                                                    363..367,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    368..369,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    369..370,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "number",
                                                                    371..377,
                                                                ),
                                                            ),
                                                            371..377,
                                                        ),
                                                    ),
                                                    370..378,
                                                ),
                                                (
                                                    CommandOption(
                                                        "-0",
                                                    ),
                                                    378..380,
                                                ),
                                                (
                                                    Text(
                                                        ".",
                                                    ),
                                                    380..381,
                                                ),
                                                (
                                                    Text(
                                                        "5",
                                                    ),
                                                    381..382,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    382..383,
                                                ),
                                                (
                                                    Text(
                                                        "/",
                                                    ),
                                                    383..384,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    384..385,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    385..386,
                                                ),
                                                (
                                                    Text(
                                                        "|",
                                                    ),
                                                    387..388,
                                                ),
                                                (
                                                    Text(
                                                        "bc",
                                                    ),
                                                    389..391,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    392..393,
                                                ),
                                            ],
                                            [],
                                        ),
                                        355..393,
                                    ),
                                    (
                                        "as",
                                        394..396,
                                    ),
                                    (
                                        Int,
                                        397..400,
                                    ),
                                ),
                                355..400,
                            ),
                        ),
                    ),
                    348..400,
                ),
            ],
        ),
        196..402,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the largest integer less than or equal to a number",
                        ),
                        404..467,
                    ),
                ),
                404..467,
            ),
        ),
        404..467,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    467..487,
                ),
            ],
            (
                true,
                488..491,
            ),
            (
                "fun",
                492..495,
            ),
            (
                "math_floor",
                496..506,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            507..507,
                        ),
                        (
                            "number",
                            507..513,
                        ),
                        (
                            Num,
                            515..518,
                        ),
                    ),
                    507..518,
                ),
            ],
            Some(
                (
                    Int,
                    521..524,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            531..537,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Trust,
                                                    538..543,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    544..545,
                                                ),
                                                (
                                                    Text(
                                                        "echo",
                                                    ),
                                                    546..550,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    551..552,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "number",
                                                                    553..559,
                                                                ),
                                                            ),
                                                            553..559,
                                                        ),
                                                    ),
                                                    552..560,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    560..561,
                                                ),
                                                (
                                                    Text(
                                                        "|",
                                                    ),
                                                    562..563,
                                                ),
                                                (
                                                    Text(
                                                        "awk",
                                                    ),
                                                    564..567,
                                                ),
                                                (
                                                    Text(
                                                        "'",
                                                    ),
                                                    568..569,
                                                ),
                                                (
                                                    Escape(
                                                        "{",
                                                    ),
                                                    569..571,
                                                ),
                                                (
                                                    Text(
                                                        "printf",
                                                    ),
                                                    571..577,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    578..579,
                                                ),
                                                (
                                                    Text(
                                                        "%",
                                                    ),
                                                    579..580,
                                                ),
                                                (
                                                    Text(
                                                        "d",
                                                    ),
                                                    580..581,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    581..582,
                                                ),
                                                (
                                                    Text(
                                                        ",",
                                                    ),
                                                    582..583,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    584..585,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    585..587,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    587..588,
                                                ),
                                                (
                                                    Text(
                                                        "<",
                                                    ),
                                                    589..590,
                                                ),
                                                (
                                                    Text(
                                                        "0",
                                                    ),
                                                    591..592,
                                                ),
                                                (
                                                    Text(
                                                        "?",
                                                    ),
                                                    593..594,
                                                ),
                                                (
                                                    Text(
                                                        "int",
                                                    ),
                                                    595..598,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    598..599,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    599..601,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    601..602,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    602..603,
                                                ),
                                                (
                                                    CommandOption(
                                                        "-1",
                                                    ),
                                                    604..607,
                                                ),
                                                (
                                                    Text(
                                                        ":",
                                                    ),
                                                    608..609,
                                                ),
                                                (
                                                    Text(
                                                        "int",
                                                    ),
                                                    610..613,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    613..614,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    614..616,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    616..617,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    617..618,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    618..619,
                                                ),
                                                (
                                                    Text(
                                                        "}",
                                                    ),
                                                    619..620,
                                                ),
                                                (
                                                    Text(
                                                        "'",
                                                    ),
                                                    620..621,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    622..623,
                                                ),
                                            ],
                                            [],
                                        ),
                                        538..623,
                                    ),
                                    (
                                        "as",
                                        624..626,
                                    ),
                                    (
                                        Int,
                                        627..630,
                                    ),
                                ),
                                538..630,
                            ),
                        ),
                    ),
                    531..630,
                ),
            ],
        ),
        467..632,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the smallest integer greater than or equal to a number",
                        ),
                        634..701,
                    ),
                ),
                634..701,
            ),
        ),
        634..701,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    701..721,
                ),
            ],
            (
                true,
                722..725,
            ),
            (
                "fun",
                726..729,
            ),
            (
                "math_ceil",
                730..739,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            740..740,
                        ),
                        (
                            "number",
                            740..746,
                        ),
                        (
                            Num,
                            748..751,
                        ),
                    ),
                    740..751,
                ),
            ],
            Some(
                (
                    Int,
                    754..757,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            764..770,
                        ),
                        Some(
                            (
                                Add(
                                    (
                                        FunctionInvocation(
                                            [],
                                            (
                                                "math_floor",
                                                771..781,
                                            ),
                                            [
                                                (
                                                    Var(
                                                        (
                                                            "number",
                                                            782..788,
                                                        ),
                                                    ),
                                                    782..788,
                                                ),
                                            ],
                                            [],
                                        ),
                                        771..789,
                                    ),
                                    (
                                        Int(
                                            (
                                                1,
                                                792..793,
                                            ),
                                        ),
                                        792..793,
                                    ),
                                ),
                                771..793,
                            ),
                        ),
                    ),
                    764..793,
                ),
            ],
        ),
        701..795,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the absolute value of a number",
                        ),
                        797..840,
                    ),
                ),
                797..840,
            ),
        ),
        797..840,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    840..860,
                ),
            ],
            (
                true,
                861..864,
            ),
            (
                "fun",
                865..868,
            ),
            (
                "math_abs",
                869..877,
            ),
            [
                (
                    Generic(
                        (
                            false,
                            878..878,
                        ),
                        (
                            "number",
                            878..884,
                        ),
                    ),
                    878..884,
                ),
            ],
            None,
            [
                (
                    IfCondition(
                        (
                            "if",
                            892..894,
                        ),
                        (
                            IfCondition(
                                (
                                    Lt(
                                        (
                                            Var(
                                                (
                                                    "number",
                                                    895..901,
                                                ),
                                            ),
                                            895..901,
                                        ),
                                        (
                                            Int(
                                                (
                                                    0,
                                                    904..905,
                                                ),
                                            ),
                                            904..905,
                                        ),
                                    ),
                                    895..905,
                                ),
                                (
                                    Singleline(
                                        (
                                            Return(
                                                (
                                                    "return",
                                                    907..913,
                                                ),
                                                Some(
                                                    (
                                                        Neg(
                                                            (
                                                                "-",
                                                                914..915,
                                                            ),
                                                            (
                                                                Var(
                                                                    (
                                                                        "number",
                                                                        915..921,
                                                                    ),
                                                                ),
                                                                915..921,
                                                            ),
                                                        ),
                                                        915..921,
                                                    ),
                                                ),
                                            ),
                                            907..921,
                                        ),
                                    ),
                                    905..921,
                                ),
                            ),
                            895..921,
                        ),
                        [],
                        None,
                    ),
                    892..921,
                ),
                (
                    Return(
                        (
                            "return",
                            926..932,
                        ),
                        Some(
                            (
                                Var(
                                    (
                                        "number",
                                        933..939,
                                    ),
                                ),
                                933..939,
                            ),
                        ),
                    ),
                    926..939,
                ),
            ],
        ),
        840..941,
    ),
]
