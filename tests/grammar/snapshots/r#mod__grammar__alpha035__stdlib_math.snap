---
source: tests/grammar/alpha035.rs
expression: parse_unwrap(&tokenize(&stdlib))
---
[
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Sum the array content",
                        ),
                        0..26,
                    ),
                ),
                0..26,
            ),
        ),
        0..26,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    26..46,
                ),
            ],
            (
                true,
                47..50,
            ),
            (
                "fun",
                51..54,
            ),
            (
                "sum",
                55..58,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            59..59,
                        ),
                        (
                            "list",
                            59..63,
                        ),
                        (
                            [Num],
                            65..70,
                        ),
                    ),
                    59..70,
                ),
            ],
            Some(
                (
                    Num,
                    73..76,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            83..89,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Unsafe,
                                                    90..96,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    97..98,
                                                ),
                                                (
                                                    Text(
                                                        "echo \"",
                                                    ),
                                                    98..104,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "list",
                                                                    105..109,
                                                                ),
                                                            ),
                                                            105..109,
                                                        ),
                                                    ),
                                                    104..110,
                                                ),
                                                (
                                                    Text(
                                                        "\" | awk '",
                                                    ),
                                                    110..119,
                                                ),
                                                (
                                                    Text(
                                                        "\\{",
                                                    ),
                                                    119..121,
                                                ),
                                                (
                                                    Text(
                                                        "s=0; for (i=1; i<=NF; i++) s+=",
                                                    ),
                                                    121..151,
                                                ),
                                                (
                                                    Text(
                                                        "\\$",
                                                    ),
                                                    151..153,
                                                ),
                                                (
                                                    Text(
                                                        "i; print s}'",
                                                    ),
                                                    153..165,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    165..166,
                                                ),
                                            ],
                                            None,
                                        ),
                                        90..166,
                                    ),
                                    (
                                        "as",
                                        167..169,
                                    ),
                                    (
                                        Num,
                                        170..173,
                                    ),
                                ),
                                90..173,
                            ),
                        ),
                    ),
                    83..173,
                ),
            ],
        ),
        26..175,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the number rounded to the nearest integer",
                        ),
                        177..231,
                    ),
                ),
                177..231,
            ),
        ),
        177..231,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    231..251,
                ),
            ],
            (
                true,
                252..255,
            ),
            (
                "fun",
                256..259,
            ),
            (
                "round",
                260..265,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            266..266,
                        ),
                        (
                            "number",
                            266..272,
                        ),
                        (
                            Num,
                            274..277,
                        ),
                    ),
                    266..277,
                ),
            ],
            Some(
                (
                    Num,
                    280..283,
                ),
            ),
            [
                (
                    IfCondition(
                        (
                            "if",
                            290..292,
                        ),
                        (
                            IfCondition(
                                (
                                    Gt(
                                        (
                                            Var(
                                                (
                                                    "number",
                                                    293..299,
                                                ),
                                            ),
                                            293..299,
                                        ),
                                        (
                                            Number(
                                                (
                                                    0.0,
                                                    302..303,
                                                ),
                                            ),
                                            302..303,
                                        ),
                                    ),
                                    293..303,
                                ),
                                (
                                    Block(
                                        [],
                                        [
                                            (
                                                Return(
                                                    (
                                                        "return",
                                                        314..320,
                                                    ),
                                                    Some(
                                                        (
                                                            Cast(
                                                                (
                                                                    Command(
                                                                        [
                                                                            (
                                                                                Unsafe,
                                                                                321..327,
                                                                            ),
                                                                        ],
                                                                        [
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                328..329,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "echo \"(",
                                                                                ),
                                                                                329..336,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "number",
                                                                                                337..343,
                                                                                            ),
                                                                                        ),
                                                                                        337..343,
                                                                                    ),
                                                                                ),
                                                                                336..344,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "+0.5)/1\" | bc",
                                                                                ),
                                                                                344..357,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                357..358,
                                                                            ),
                                                                        ],
                                                                        None,
                                                                    ),
                                                                    321..358,
                                                                ),
                                                                (
                                                                    "as",
                                                                    359..361,
                                                                ),
                                                                (
                                                                    Num,
                                                                    362..365,
                                                                ),
                                                            ),
                                                            321..365,
                                                        ),
                                                    ),
                                                ),
                                                314..365,
                                            ),
                                        ],
                                    ),
                                    304..371,
                                ),
                            ),
                            293..371,
                        ),
                        [],
                        None,
                    ),
                    290..371,
                ),
                (
                    Return(
                        (
                            "return",
                            377..383,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Unsafe,
                                                    384..390,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    391..392,
                                                ),
                                                (
                                                    Text(
                                                        "echo \"(",
                                                    ),
                                                    392..399,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "number",
                                                                    400..406,
                                                                ),
                                                            ),
                                                            400..406,
                                                        ),
                                                    ),
                                                    399..407,
                                                ),
                                                (
                                                    Text(
                                                        "-0.5)/1\" | bc",
                                                    ),
                                                    407..420,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    420..421,
                                                ),
                                            ],
                                            None,
                                        ),
                                        384..421,
                                    ),
                                    (
                                        "as",
                                        422..424,
                                    ),
                                    (
                                        Num,
                                        425..428,
                                    ),
                                ),
                                384..428,
                            ),
                        ),
                    ),
                    377..428,
                ),
            ],
        ),
        231..430,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the largest integer less than or equal to the number",
                        ),
                        432..497,
                    ),
                ),
                432..497,
            ),
        ),
        432..497,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    497..517,
                ),
            ],
            (
                true,
                518..521,
            ),
            (
                "fun",
                522..525,
            ),
            (
                "floor",
                526..531,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            532..532,
                        ),
                        (
                            "number",
                            532..538,
                        ),
                        (
                            Num,
                            540..543,
                        ),
                    ),
                    532..543,
                ),
            ],
            Some(
                (
                    Num,
                    546..549,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            556..562,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Unsafe,
                                                    563..569,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    570..571,
                                                ),
                                                (
                                                    Text(
                                                        "echo \"",
                                                    ),
                                                    571..577,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "number",
                                                                    578..584,
                                                                ),
                                                            ),
                                                            578..584,
                                                        ),
                                                    ),
                                                    577..585,
                                                ),
                                                (
                                                    Text(
                                                        "\" | awk '",
                                                    ),
                                                    585..594,
                                                ),
                                                (
                                                    Text(
                                                        "\\{",
                                                    ),
                                                    594..596,
                                                ),
                                                (
                                                    Text(
                                                        "printf \"%d\", (",
                                                    ),
                                                    596..610,
                                                ),
                                                (
                                                    Text(
                                                        "\\$",
                                                    ),
                                                    610..612,
                                                ),
                                                (
                                                    Text(
                                                        "1 < 0 ? int(",
                                                    ),
                                                    612..624,
                                                ),
                                                (
                                                    Text(
                                                        "\\$",
                                                    ),
                                                    624..626,
                                                ),
                                                (
                                                    Text(
                                                        "1) - 1 : int(",
                                                    ),
                                                    626..639,
                                                ),
                                                (
                                                    Text(
                                                        "\\$",
                                                    ),
                                                    639..641,
                                                ),
                                                (
                                                    Text(
                                                        "1))}'",
                                                    ),
                                                    641..646,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    646..647,
                                                ),
                                            ],
                                            None,
                                        ),
                                        563..647,
                                    ),
                                    (
                                        "as",
                                        648..650,
                                    ),
                                    (
                                        Num,
                                        651..654,
                                    ),
                                ),
                                563..654,
                            ),
                        ),
                    ),
                    556..654,
                ),
            ],
        ),
        497..656,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the smallest integer greater than or equal to the number",
                        ),
                        658..727,
                    ),
                ),
                658..727,
            ),
        ),
        658..727,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    727..747,
                ),
            ],
            (
                true,
                748..751,
            ),
            (
                "fun",
                752..755,
            ),
            (
                "ceil",
                756..760,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            761..761,
                        ),
                        (
                            "number",
                            761..767,
                        ),
                        (
                            Num,
                            769..772,
                        ),
                    ),
                    761..772,
                ),
            ],
            Some(
                (
                    Num,
                    775..778,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            785..791,
                        ),
                        Some(
                            (
                                Add(
                                    (
                                        FunctionInvocation(
                                            [],
                                            (
                                                "floor",
                                                792..797,
                                            ),
                                            [
                                                (
                                                    Var(
                                                        (
                                                            "number",
                                                            798..804,
                                                        ),
                                                    ),
                                                    798..804,
                                                ),
                                            ],
                                            None,
                                        ),
                                        792..805,
                                    ),
                                    (
                                        Number(
                                            (
                                                1.0,
                                                808..809,
                                            ),
                                        ),
                                        808..809,
                                    ),
                                ),
                                792..809,
                            ),
                        ),
                    ),
                    785..809,
                ),
            ],
        ),
        727..811,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the absolute value of the number",
                        ),
                        813..858,
                    ),
                ),
                813..858,
            ),
        ),
        813..858,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    858..878,
                ),
            ],
            (
                true,
                879..882,
            ),
            (
                "fun",
                883..886,
            ),
            (
                "abs",
                887..890,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            891..891,
                        ),
                        (
                            "number",
                            891..897,
                        ),
                        (
                            Num,
                            899..902,
                        ),
                    ),
                    891..902,
                ),
            ],
            Some(
                (
                    Num,
                    905..908,
                ),
            ),
            [
                (
                    IfCondition(
                        (
                            "if",
                            915..917,
                        ),
                        (
                            InlineIfCondition(
                                (
                                    Lt(
                                        (
                                            Var(
                                                (
                                                    "number",
                                                    918..924,
                                                ),
                                            ),
                                            918..924,
                                        ),
                                        (
                                            Number(
                                                (
                                                    0.0,
                                                    927..928,
                                                ),
                                            ),
                                            927..928,
                                        ),
                                    ),
                                    918..928,
                                ),
                                (
                                    Return(
                                        (
                                            "return",
                                            930..936,
                                        ),
                                        Some(
                                            (
                                                Neg(
                                                    (
                                                        "-",
                                                        937..938,
                                                    ),
                                                    (
                                                        Var(
                                                            (
                                                                "number",
                                                                938..944,
                                                            ),
                                                        ),
                                                        938..944,
                                                    ),
                                                ),
                                                938..944,
                                            ),
                                        ),
                                    ),
                                    930..944,
                                ),
                            ),
                            918..944,
                        ),
                        [],
                        None,
                    ),
                    915..944,
                ),
                (
                    Return(
                        (
                            "return",
                            949..955,
                        ),
                        Some(
                            (
                                Var(
                                    (
                                        "number",
                                        956..962,
                                    ),
                                ),
                                956..962,
                            ),
                        ),
                    ),
                    949..962,
                ),
            ],
        ),
        858..964,
    ),
]
