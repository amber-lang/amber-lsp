---
source: tests/grammar/alpha050.rs
expression: parse_unwrap(&tokenize(&stdlib))
---
[
    (
        Import(
            (
                false,
                0..6,
            ),
            (
                "import",
                0..6,
            ),
            (
                ImportAll,
                7..8,
            ),
            (
                "from",
                9..13,
            ),
            (
                "std/env",
                14..23,
            ),
        ),
        0..23,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Downloads a file from a given URL and saves it to a specified path using available command-line tools.",
                        ),
                        25..132,
                    ),
                ),
                25..132,
            ),
        ),
        25..132,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "",
                        ),
                        132..136,
                    ),
                ),
                132..136,
            ),
        ),
        132..136,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "It checks for the availability of common command-line tools (`curl`, `wget`, and `aria2c`, in order) and uses the first available tool to perform the download.",
                        ),
                        136..300,
                    ),
                ),
                136..300,
            ),
        ),
        136..300,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "If none of the tools are available, the function fails.",
                        ),
                        300..360,
                    ),
                ),
                300..360,
            ),
        ),
        300..360,
    ),
    (
        FunctionDefinition(
            [],
            (
                true,
                360..363,
            ),
            (
                "fun",
                364..367,
            ),
            (
                "file_download",
                368..381,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            382..382,
                        ),
                        (
                            "url",
                            382..385,
                        ),
                        (
                            Text,
                            387..391,
                        ),
                    ),
                    382..391,
                ),
                (
                    Typed(
                        (
                            false,
                            393..392,
                        ),
                        (
                            "path",
                            393..397,
                        ),
                        (
                            Text,
                            399..403,
                        ),
                    ),
                    393..403,
                ),
            ],
            Some(
                (
                    Null?,
                    406..411,
                ),
            ),
            [
                (
                    IfChain(
                        (
                            "if",
                            418..420,
                        ),
                        [
                            (
                                IfCondition(
                                    (
                                        IfCondition(
                                            (
                                                FunctionInvocation(
                                                    [],
                                                    (
                                                        "is_command",
                                                        431..441,
                                                    ),
                                                    [
                                                        (
                                                            Text(
                                                                [
                                                                    (
                                                                        Text(
                                                                            (
                                                                                "curl",
                                                                                443..447,
                                                                            ),
                                                                        ),
                                                                        443..447,
                                                                    ),
                                                                ],
                                                            ),
                                                            442..448,
                                                        ),
                                                    ],
                                                    [],
                                                ),
                                                431..449,
                                            ),
                                            (
                                                Block(
                                                    [],
                                                    [
                                                        (
                                                            Expression(
                                                                (
                                                                    Command(
                                                                        [
                                                                            (
                                                                                Silent,
                                                                                464..470,
                                                                            ),
                                                                            (
                                                                                Trust,
                                                                                471..476,
                                                                            ),
                                                                        ],
                                                                        [
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                477..478,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "curl",
                                                                                ),
                                                                                479..483,
                                                                            ),
                                                                            (
                                                                                CommandOption(
                                                                                    "-L",
                                                                                ),
                                                                                484..486,
                                                                            ),
                                                                            (
                                                                                CommandOption(
                                                                                    "-o",
                                                                                ),
                                                                                487..489,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                490..491,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "path",
                                                                                                492..496,
                                                                                            ),
                                                                                        ),
                                                                                        492..496,
                                                                                    ),
                                                                                ),
                                                                                491..497,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                497..498,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                499..500,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "url",
                                                                                                501..504,
                                                                                            ),
                                                                                        ),
                                                                                        501..504,
                                                                                    ),
                                                                                ),
                                                                                500..505,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                505..506,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                507..508,
                                                                            ),
                                                                        ],
                                                                        [],
                                                                    ),
                                                                    464..508,
                                                                ),
                                                            ),
                                                            464..508,
                                                        ),
                                                    ],
                                                ),
                                                450..518,
                                            ),
                                        ),
                                        431..518,
                                    ),
                                ),
                                431..518,
                            ),
                            (
                                IfCondition(
                                    (
                                        IfCondition(
                                            (
                                                FunctionInvocation(
                                                    [],
                                                    (
                                                        "is_command",
                                                        527..537,
                                                    ),
                                                    [
                                                        (
                                                            Text(
                                                                [
                                                                    (
                                                                        Text(
                                                                            (
                                                                                "wget",
                                                                                539..543,
                                                                            ),
                                                                        ),
                                                                        539..543,
                                                                    ),
                                                                ],
                                                            ),
                                                            538..544,
                                                        ),
                                                    ],
                                                    [],
                                                ),
                                                527..545,
                                            ),
                                            (
                                                Block(
                                                    [],
                                                    [
                                                        (
                                                            Expression(
                                                                (
                                                                    Command(
                                                                        [
                                                                            (
                                                                                Silent,
                                                                                560..566,
                                                                            ),
                                                                            (
                                                                                Trust,
                                                                                567..572,
                                                                            ),
                                                                        ],
                                                                        [
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                573..574,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "wget",
                                                                                ),
                                                                                575..579,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                580..581,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "url",
                                                                                                582..585,
                                                                                            ),
                                                                                        ),
                                                                                        582..585,
                                                                                    ),
                                                                                ),
                                                                                581..586,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                586..587,
                                                                            ),
                                                                            (
                                                                                CommandOption(
                                                                                    "-P",
                                                                                ),
                                                                                588..590,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                591..592,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "path",
                                                                                                593..597,
                                                                                            ),
                                                                                        ),
                                                                                        593..597,
                                                                                    ),
                                                                                ),
                                                                                592..598,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                598..599,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                600..601,
                                                                            ),
                                                                        ],
                                                                        [],
                                                                    ),
                                                                    560..601,
                                                                ),
                                                            ),
                                                            560..601,
                                                        ),
                                                    ],
                                                ),
                                                546..611,
                                            ),
                                        ),
                                        527..611,
                                    ),
                                ),
                                527..611,
                            ),
                            (
                                IfCondition(
                                    (
                                        IfCondition(
                                            (
                                                FunctionInvocation(
                                                    [],
                                                    (
                                                        "is_command",
                                                        620..630,
                                                    ),
                                                    [
                                                        (
                                                            Text(
                                                                [
                                                                    (
                                                                        Text(
                                                                            (
                                                                                "aria2c",
                                                                                632..638,
                                                                            ),
                                                                        ),
                                                                        632..638,
                                                                    ),
                                                                ],
                                                            ),
                                                            631..639,
                                                        ),
                                                    ],
                                                    [],
                                                ),
                                                620..640,
                                            ),
                                            (
                                                Block(
                                                    [],
                                                    [
                                                        (
                                                            Expression(
                                                                (
                                                                    Command(
                                                                        [
                                                                            (
                                                                                Silent,
                                                                                655..661,
                                                                            ),
                                                                            (
                                                                                Trust,
                                                                                662..667,
                                                                            ),
                                                                        ],
                                                                        [
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                668..669,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "aria2c",
                                                                                ),
                                                                                670..676,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                677..678,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "url",
                                                                                                679..682,
                                                                                            ),
                                                                                        ),
                                                                                        679..682,
                                                                                    ),
                                                                                ),
                                                                                678..683,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                683..684,
                                                                            ),
                                                                            (
                                                                                CommandOption(
                                                                                    "-d",
                                                                                ),
                                                                                685..687,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                688..689,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "path",
                                                                                                690..694,
                                                                                            ),
                                                                                        ),
                                                                                        690..694,
                                                                                    ),
                                                                                ),
                                                                                689..695,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                695..696,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                697..698,
                                                                            ),
                                                                        ],
                                                                        [],
                                                                    ),
                                                                    655..698,
                                                                ),
                                                            ),
                                                            655..698,
                                                        ),
                                                    ],
                                                ),
                                                641..708,
                                            ),
                                        ),
                                        620..708,
                                    ),
                                ),
                                620..708,
                            ),
                            (
                                Else(
                                    (
                                        Else(
                                            (
                                                "else",
                                                717..721,
                                            ),
                                            (
                                                Block(
                                                    [],
                                                    [
                                                        (
                                                            Fail(
                                                                (
                                                                    "fail",
                                                                    736..740,
                                                                ),
                                                                Some(
                                                                    (
                                                                        Int(
                                                                            (
                                                                                1,
                                                                                741..742,
                                                                            ),
                                                                        ),
                                                                        741..742,
                                                                    ),
                                                                ),
                                                            ),
                                                            736..742,
                                                        ),
                                                    ],
                                                ),
                                                722..752,
                                            ),
                                        ),
                                        717..752,
                                    ),
                                ),
                                717..752,
                            ),
                        ],
                    ),
                    418..758,
                ),
            ],
        ),
        360..760,
    ),
]
