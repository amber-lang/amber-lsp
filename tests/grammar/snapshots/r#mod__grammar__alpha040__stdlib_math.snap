---
source: tests/grammar/alpha040.rs
expression: parse_unwrap(&tokenize(&stdlib))
---
[
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Sums an array's contents",
                        ),
                        0..29,
                    ),
                ),
                0..29,
            ),
        ),
        0..29,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    29..49,
                ),
            ],
            (
                true,
                50..53,
            ),
            (
                "fun",
                54..57,
            ),
            (
                "math_sum",
                58..66,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            67..67,
                        ),
                        (
                            "list",
                            67..71,
                        ),
                        (
                            [Num],
                            73..78,
                        ),
                    ),
                    67..78,
                ),
            ],
            Some(
                (
                    Num,
                    81..84,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            91..97,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Trust,
                                                    98..103,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    104..105,
                                                ),
                                                (
                                                    Text(
                                                        "echo",
                                                    ),
                                                    106..110,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    111..112,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "list",
                                                                    113..117,
                                                                ),
                                                            ),
                                                            113..117,
                                                        ),
                                                    ),
                                                    112..118,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    118..119,
                                                ),
                                                (
                                                    Text(
                                                        "|",
                                                    ),
                                                    120..121,
                                                ),
                                                (
                                                    Text(
                                                        "awk",
                                                    ),
                                                    122..125,
                                                ),
                                                (
                                                    Text(
                                                        "'",
                                                    ),
                                                    126..127,
                                                ),
                                                (
                                                    Escape(
                                                        "{",
                                                    ),
                                                    127..129,
                                                ),
                                                (
                                                    Text(
                                                        "s",
                                                    ),
                                                    129..130,
                                                ),
                                                (
                                                    Text(
                                                        "=",
                                                    ),
                                                    130..131,
                                                ),
                                                (
                                                    Text(
                                                        "0",
                                                    ),
                                                    131..132,
                                                ),
                                                (
                                                    Text(
                                                        ";",
                                                    ),
                                                    132..133,
                                                ),
                                                (
                                                    Text(
                                                        "for",
                                                    ),
                                                    134..137,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    138..139,
                                                ),
                                                (
                                                    Text(
                                                        "i",
                                                    ),
                                                    139..140,
                                                ),
                                                (
                                                    Text(
                                                        "=",
                                                    ),
                                                    140..141,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    141..142,
                                                ),
                                                (
                                                    Text(
                                                        ";",
                                                    ),
                                                    142..143,
                                                ),
                                                (
                                                    Text(
                                                        "i",
                                                    ),
                                                    144..145,
                                                ),
                                                (
                                                    Text(
                                                        "<=",
                                                    ),
                                                    145..147,
                                                ),
                                                (
                                                    Text(
                                                        "NF",
                                                    ),
                                                    147..149,
                                                ),
                                                (
                                                    Text(
                                                        ";",
                                                    ),
                                                    149..150,
                                                ),
                                                (
                                                    Text(
                                                        "i",
                                                    ),
                                                    151..152,
                                                ),
                                                (
                                                    Text(
                                                        "+",
                                                    ),
                                                    152..153,
                                                ),
                                                (
                                                    Text(
                                                        "+",
                                                    ),
                                                    153..154,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    154..155,
                                                ),
                                                (
                                                    Text(
                                                        "s",
                                                    ),
                                                    156..157,
                                                ),
                                                (
                                                    Text(
                                                        "+=",
                                                    ),
                                                    157..159,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    159..161,
                                                ),
                                                (
                                                    Text(
                                                        "i",
                                                    ),
                                                    161..162,
                                                ),
                                                (
                                                    Text(
                                                        ";",
                                                    ),
                                                    162..163,
                                                ),
                                                (
                                                    Text(
                                                        "print",
                                                    ),
                                                    164..169,
                                                ),
                                                (
                                                    Text(
                                                        "s",
                                                    ),
                                                    170..171,
                                                ),
                                                (
                                                    Text(
                                                        "}",
                                                    ),
                                                    171..172,
                                                ),
                                                (
                                                    Text(
                                                        "'",
                                                    ),
                                                    172..173,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    174..175,
                                                ),
                                            ],
                                            None,
                                        ),
                                        98..175,
                                    ),
                                    (
                                        "as",
                                        176..178,
                                    ),
                                    (
                                        Num,
                                        179..182,
                                    ),
                                ),
                                98..182,
                            ),
                        ),
                    ),
                    91..182,
                ),
            ],
        ),
        29..184,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns a number, rounded to the nearest integer",
                        ),
                        186..239,
                    ),
                ),
                186..239,
            ),
        ),
        186..239,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    239..259,
                ),
            ],
            (
                true,
                260..263,
            ),
            (
                "fun",
                264..267,
            ),
            (
                "math_round",
                268..278,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            279..279,
                        ),
                        (
                            "number",
                            279..285,
                        ),
                        (
                            Num,
                            287..290,
                        ),
                    ),
                    279..290,
                ),
            ],
            Some(
                (
                    Num,
                    293..296,
                ),
            ),
            [
                (
                    IfCondition(
                        (
                            "if",
                            303..305,
                        ),
                        (
                            IfCondition(
                                (
                                    Gt(
                                        (
                                            Var(
                                                (
                                                    "number",
                                                    306..312,
                                                ),
                                            ),
                                            306..312,
                                        ),
                                        (
                                            Number(
                                                (
                                                    0.0,
                                                    315..316,
                                                ),
                                            ),
                                            315..316,
                                        ),
                                    ),
                                    306..316,
                                ),
                                (
                                    Block(
                                        [],
                                        [
                                            (
                                                Return(
                                                    (
                                                        "return",
                                                        327..333,
                                                    ),
                                                    Some(
                                                        (
                                                            Cast(
                                                                (
                                                                    Command(
                                                                        [
                                                                            (
                                                                                Trust,
                                                                                334..339,
                                                                            ),
                                                                        ],
                                                                        [
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                340..341,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "echo",
                                                                                ),
                                                                                342..346,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                347..348,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "(",
                                                                                ),
                                                                                348..349,
                                                                            ),
                                                                            (
                                                                                Expression(
                                                                                    (
                                                                                        Var(
                                                                                            (
                                                                                                "number",
                                                                                                350..356,
                                                                                            ),
                                                                                        ),
                                                                                        350..356,
                                                                                    ),
                                                                                ),
                                                                                349..357,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "+",
                                                                                ),
                                                                                357..358,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "0",
                                                                                ),
                                                                                358..359,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    ".",
                                                                                ),
                                                                                359..360,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "5",
                                                                                ),
                                                                                360..361,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    ")",
                                                                                ),
                                                                                361..362,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "/",
                                                                                ),
                                                                                362..363,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "1",
                                                                                ),
                                                                                363..364,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "\"",
                                                                                ),
                                                                                364..365,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "|",
                                                                                ),
                                                                                366..367,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "bc",
                                                                                ),
                                                                                368..370,
                                                                            ),
                                                                            (
                                                                                Text(
                                                                                    "$",
                                                                                ),
                                                                                371..372,
                                                                            ),
                                                                        ],
                                                                        None,
                                                                    ),
                                                                    334..372,
                                                                ),
                                                                (
                                                                    "as",
                                                                    373..375,
                                                                ),
                                                                (
                                                                    Num,
                                                                    376..379,
                                                                ),
                                                            ),
                                                            334..379,
                                                        ),
                                                    ),
                                                ),
                                                327..379,
                                            ),
                                        ],
                                    ),
                                    317..385,
                                ),
                            ),
                            306..385,
                        ),
                        [],
                        None,
                    ),
                    303..385,
                ),
                (
                    Return(
                        (
                            "return",
                            391..397,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Trust,
                                                    398..403,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    404..405,
                                                ),
                                                (
                                                    Text(
                                                        "echo",
                                                    ),
                                                    406..410,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    411..412,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    412..413,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "number",
                                                                    414..420,
                                                                ),
                                                            ),
                                                            414..420,
                                                        ),
                                                    ),
                                                    413..421,
                                                ),
                                                (
                                                    CommandOption(
                                                        "-0",
                                                    ),
                                                    421..423,
                                                ),
                                                (
                                                    Text(
                                                        ".",
                                                    ),
                                                    423..424,
                                                ),
                                                (
                                                    Text(
                                                        "5",
                                                    ),
                                                    424..425,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    425..426,
                                                ),
                                                (
                                                    Text(
                                                        "/",
                                                    ),
                                                    426..427,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    427..428,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    428..429,
                                                ),
                                                (
                                                    Text(
                                                        "|",
                                                    ),
                                                    430..431,
                                                ),
                                                (
                                                    Text(
                                                        "bc",
                                                    ),
                                                    432..434,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    435..436,
                                                ),
                                            ],
                                            None,
                                        ),
                                        398..436,
                                    ),
                                    (
                                        "as",
                                        437..439,
                                    ),
                                    (
                                        Num,
                                        440..443,
                                    ),
                                ),
                                398..443,
                            ),
                        ),
                    ),
                    391..443,
                ),
            ],
        ),
        239..445,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the largest integer less than or equal to a number",
                        ),
                        447..510,
                    ),
                ),
                447..510,
            ),
        ),
        447..510,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    510..530,
                ),
            ],
            (
                true,
                531..534,
            ),
            (
                "fun",
                535..538,
            ),
            (
                "math_floor",
                539..549,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            550..550,
                        ),
                        (
                            "number",
                            550..556,
                        ),
                        (
                            Num,
                            558..561,
                        ),
                    ),
                    550..561,
                ),
            ],
            Some(
                (
                    Num,
                    564..567,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            574..580,
                        ),
                        Some(
                            (
                                Cast(
                                    (
                                        Command(
                                            [
                                                (
                                                    Trust,
                                                    581..586,
                                                ),
                                            ],
                                            [
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    587..588,
                                                ),
                                                (
                                                    Text(
                                                        "echo",
                                                    ),
                                                    589..593,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    594..595,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Var(
                                                                (
                                                                    "number",
                                                                    596..602,
                                                                ),
                                                            ),
                                                            596..602,
                                                        ),
                                                    ),
                                                    595..603,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    603..604,
                                                ),
                                                (
                                                    Text(
                                                        "|",
                                                    ),
                                                    605..606,
                                                ),
                                                (
                                                    Text(
                                                        "awk",
                                                    ),
                                                    607..610,
                                                ),
                                                (
                                                    Text(
                                                        "'",
                                                    ),
                                                    611..612,
                                                ),
                                                (
                                                    Escape(
                                                        "{",
                                                    ),
                                                    612..614,
                                                ),
                                                (
                                                    Text(
                                                        "printf",
                                                    ),
                                                    614..620,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    621..622,
                                                ),
                                                (
                                                    Text(
                                                        "%",
                                                    ),
                                                    622..623,
                                                ),
                                                (
                                                    Text(
                                                        "d",
                                                    ),
                                                    623..624,
                                                ),
                                                (
                                                    Text(
                                                        "\"",
                                                    ),
                                                    624..625,
                                                ),
                                                (
                                                    Text(
                                                        ",",
                                                    ),
                                                    625..626,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    627..628,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    628..630,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    630..631,
                                                ),
                                                (
                                                    Text(
                                                        "<",
                                                    ),
                                                    632..633,
                                                ),
                                                (
                                                    Text(
                                                        "0",
                                                    ),
                                                    634..635,
                                                ),
                                                (
                                                    Text(
                                                        "?",
                                                    ),
                                                    636..637,
                                                ),
                                                (
                                                    Text(
                                                        "int",
                                                    ),
                                                    638..641,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    641..642,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    642..644,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    644..645,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    645..646,
                                                ),
                                                (
                                                    CommandOption(
                                                        "-1",
                                                    ),
                                                    647..650,
                                                ),
                                                (
                                                    Text(
                                                        ":",
                                                    ),
                                                    651..652,
                                                ),
                                                (
                                                    Text(
                                                        "int",
                                                    ),
                                                    653..656,
                                                ),
                                                (
                                                    Text(
                                                        "(",
                                                    ),
                                                    656..657,
                                                ),
                                                (
                                                    Escape(
                                                        "$",
                                                    ),
                                                    657..659,
                                                ),
                                                (
                                                    Text(
                                                        "1",
                                                    ),
                                                    659..660,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    660..661,
                                                ),
                                                (
                                                    Text(
                                                        ")",
                                                    ),
                                                    661..662,
                                                ),
                                                (
                                                    Text(
                                                        "}",
                                                    ),
                                                    662..663,
                                                ),
                                                (
                                                    Text(
                                                        "'",
                                                    ),
                                                    663..664,
                                                ),
                                                (
                                                    Text(
                                                        "$",
                                                    ),
                                                    665..666,
                                                ),
                                            ],
                                            None,
                                        ),
                                        581..666,
                                    ),
                                    (
                                        "as",
                                        667..669,
                                    ),
                                    (
                                        Num,
                                        670..673,
                                    ),
                                ),
                                581..673,
                            ),
                        ),
                    ),
                    574..673,
                ),
            ],
        ),
        510..675,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the smallest integer greater than or equal to a number",
                        ),
                        677..744,
                    ),
                ),
                677..744,
            ),
        ),
        677..744,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    744..764,
                ),
            ],
            (
                true,
                765..768,
            ),
            (
                "fun",
                769..772,
            ),
            (
                "math_ceil",
                773..782,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            783..783,
                        ),
                        (
                            "number",
                            783..789,
                        ),
                        (
                            Num,
                            791..794,
                        ),
                    ),
                    783..794,
                ),
            ],
            Some(
                (
                    Num,
                    797..800,
                ),
            ),
            [
                (
                    Return(
                        (
                            "return",
                            807..813,
                        ),
                        Some(
                            (
                                Add(
                                    (
                                        FunctionInvocation(
                                            [],
                                            (
                                                "math_floor",
                                                814..824,
                                            ),
                                            [
                                                (
                                                    Var(
                                                        (
                                                            "number",
                                                            825..831,
                                                        ),
                                                    ),
                                                    825..831,
                                                ),
                                            ],
                                            None,
                                        ),
                                        814..832,
                                    ),
                                    (
                                        Number(
                                            (
                                                1.0,
                                                835..836,
                                            ),
                                        ),
                                        835..836,
                                    ),
                                ),
                                814..836,
                            ),
                        ),
                    ),
                    807..836,
                ),
            ],
        ),
        744..838,
    ),
    (
        Statement(
            (
                Comment(
                    (
                        DocString(
                            "Returns the absolute value of a number",
                        ),
                        840..883,
                    ),
                ),
                840..883,
            ),
        ),
        840..883,
    ),
    (
        FunctionDefinition(
            [
                (
                    AllowAbsurdCast,
                    883..903,
                ),
            ],
            (
                true,
                904..907,
            ),
            (
                "fun",
                908..911,
            ),
            (
                "math_abs",
                912..920,
            ),
            [
                (
                    Typed(
                        (
                            false,
                            921..921,
                        ),
                        (
                            "number",
                            921..927,
                        ),
                        (
                            Num,
                            929..932,
                        ),
                    ),
                    921..932,
                ),
            ],
            Some(
                (
                    Num,
                    935..938,
                ),
            ),
            [
                (
                    IfCondition(
                        (
                            "if",
                            945..947,
                        ),
                        (
                            InlineIfCondition(
                                (
                                    Lt(
                                        (
                                            Var(
                                                (
                                                    "number",
                                                    948..954,
                                                ),
                                            ),
                                            948..954,
                                        ),
                                        (
                                            Number(
                                                (
                                                    0.0,
                                                    957..958,
                                                ),
                                            ),
                                            957..958,
                                        ),
                                    ),
                                    948..958,
                                ),
                                (
                                    Return(
                                        (
                                            "return",
                                            960..966,
                                        ),
                                        Some(
                                            (
                                                Neg(
                                                    (
                                                        "-",
                                                        967..968,
                                                    ),
                                                    (
                                                        Var(
                                                            (
                                                                "number",
                                                                968..974,
                                                            ),
                                                        ),
                                                        968..974,
                                                    ),
                                                ),
                                                968..974,
                                            ),
                                        ),
                                    ),
                                    960..974,
                                ),
                            ),
                            948..974,
                        ),
                        [],
                        None,
                    ),
                    945..974,
                ),
                (
                    Return(
                        (
                            "return",
                            979..985,
                        ),
                        Some(
                            (
                                Var(
                                    (
                                        "number",
                                        986..992,
                                    ),
                                ),
                                986..992,
                            ),
                        ),
                    ),
                    979..992,
                ),
            ],
        ),
        883..994,
    ),
]
