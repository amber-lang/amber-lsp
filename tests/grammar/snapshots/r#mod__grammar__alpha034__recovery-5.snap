---
source: tests/grammar/alpha034.rs
expression: "parse(&tokenize(r#\"\n        // comments\n        // comments\n\n        import {} from \"test.ab\";\n\n        fun test_cat_cmd(file: Text): CmdText {\n            return `echo \"NOT READY\" > {file}`\n        }\n\n        fun foo(a) {\n            return \"echo \\\"{5 + 5}\\\"\";\n        }\n\n        unsafe {\n            let x = 5;\n\n            echo x;\n\n            if {\n                2 == 2 {\n                    echo 3\n                }\n                else: 5\n            }\n        }\n    \"#))"
---
(
    Some(
        [
            (
                Statement(
                    (
                        Comment(
                            "comments",
                        ),
                        9..21,
                    ),
                ),
                9..21,
            ),
            (
                Statement(
                    (
                        Comment(
                            "comments",
                        ),
                        29..41,
                    ),
                ),
                29..41,
            ),
            (
                Import(
                    (
                        false,
                        50..41,
                    ),
                    (
                        "import",
                        50..56,
                    ),
                    (
                        ImportSpecific(
                            [],
                        ),
                        57..59,
                    ),
                    (
                        "from",
                        60..64,
                    ),
                    (
                        "test.ab",
                        65..74,
                    ),
                ),
                50..74,
            ),
            (
                Statement(
                    (
                        Error,
                        74..75,
                    ),
                ),
                74..75,
            ),
            (
                FunctionDefinition(
                    [],
                    (
                        false,
                        85..75,
                    ),
                    (
                        "fun",
                        85..88,
                    ),
                    (
                        "test_cat_cmd",
                        89..101,
                    ),
                    [
                        (
                            Typed(
                                (
                                    false,
                                    102..102,
                                ),
                                (
                                    "file",
                                    102..106,
                                ),
                                (
                                    Text,
                                    108..112,
                                ),
                            ),
                            102..112,
                        ),
                    ],
                    Some(
                        (
                            <Invalid type>,
                            115..122,
                        ),
                    ),
                    [
                        (
                            Return(
                                (
                                    "return",
                                    137..143,
                                ),
                                None,
                            ),
                            137..143,
                        ),
                        (
                            Error,
                            144..149,
                        ),
                        (
                            Expression(
                                (
                                    Gt(
                                        (
                                            Text(
                                                [
                                                    (
                                                        Text(
                                                            (
                                                                "NOT",
                                                                151..154,
                                                            ),
                                                        ),
                                                        151..154,
                                                    ),
                                                    (
                                                        Text(
                                                            (
                                                                "READY",
                                                                155..160,
                                                            ),
                                                        ),
                                                        155..160,
                                                    ),
                                                ],
                                            ),
                                            150..161,
                                        ),
                                        (
                                            Error,
                                            164..163,
                                        ),
                                    ),
                                    150..163,
                                ),
                            ),
                            150..163,
                        ),
                        (
                            Block(
                                (
                                    Block(
                                        [],
                                        [
                                            (
                                                Expression(
                                                    (
                                                        Var(
                                                            (
                                                                "file",
                                                                165..169,
                                                            ),
                                                        ),
                                                        165..169,
                                                    ),
                                                ),
                                                165..169,
                                            ),
                                        ],
                                    ),
                                    164..170,
                                ),
                            ),
                            164..170,
                        ),
                        (
                            Error,
                            170..171,
                        ),
                    ],
                ),
                85..181,
            ),
            (
                FunctionDefinition(
                    [],
                    (
                        false,
                        191..181,
                    ),
                    (
                        "fun",
                        191..194,
                    ),
                    (
                        "foo",
                        195..198,
                    ),
                    [
                        (
                            Generic(
                                (
                                    false,
                                    199..199,
                                ),
                                (
                                    "a",
                                    199..200,
                                ),
                            ),
                            199..200,
                        ),
                    ],
                    None,
                    [
                        (
                            Return(
                                (
                                    "return",
                                    216..222,
                                ),
                                Some(
                                    (
                                        Text(
                                            [
                                                (
                                                    Text(
                                                        (
                                                            "echo",
                                                            224..228,
                                                        ),
                                                    ),
                                                    224..228,
                                                ),
                                                (
                                                    Escape(
                                                        (
                                                            "\"",
                                                            229..231,
                                                        ),
                                                    ),
                                                    229..231,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Add(
                                                                (
                                                                    Number(
                                                                        (
                                                                            5.0,
                                                                            232..233,
                                                                        ),
                                                                    ),
                                                                    232..233,
                                                                ),
                                                                (
                                                                    Number(
                                                                        (
                                                                            5.0,
                                                                            236..237,
                                                                        ),
                                                                    ),
                                                                    236..237,
                                                                ),
                                                            ),
                                                            232..237,
                                                        ),
                                                    ),
                                                    231..238,
                                                ),
                                                (
                                                    Escape(
                                                        (
                                                            "\"",
                                                            238..240,
                                                        ),
                                                    ),
                                                    238..240,
                                                ),
                                            ],
                                        ),
                                        223..241,
                                    ),
                                ),
                            ),
                            216..241,
                        ),
                    ],
                ),
                191..252,
            ),
            (
                Statement(
                    (
                        Block(
                            (
                                Block(
                                    [
                                        (
                                            Unsafe,
                                            262..268,
                                        ),
                                    ],
                                    [
                                        (
                                            VariableInit(
                                                (
                                                    "let",
                                                    283..286,
                                                ),
                                                (
                                                    "x",
                                                    287..288,
                                                ),
                                                (
                                                    Expression(
                                                        (
                                                            Number(
                                                                (
                                                                    5.0,
                                                                    291..292,
                                                                ),
                                                            ),
                                                            291..292,
                                                        ),
                                                    ),
                                                    291..292,
                                                ),
                                            ),
                                            283..292,
                                        ),
                                        (
                                            Echo(
                                                (
                                                    "echo",
                                                    307..311,
                                                ),
                                                (
                                                    Var(
                                                        (
                                                            "x",
                                                            312..313,
                                                        ),
                                                    ),
                                                    312..313,
                                                ),
                                            ),
                                            307..313,
                                        ),
                                        (
                                            IfChain(
                                                (
                                                    "if",
                                                    328..330,
                                                ),
                                                [
                                                    (
                                                        IfCondition(
                                                            (
                                                                IfCondition(
                                                                    (
                                                                        Eq(
                                                                            (
                                                                                Number(
                                                                                    (
                                                                                        2.0,
                                                                                        349..350,
                                                                                    ),
                                                                                ),
                                                                                349..350,
                                                                            ),
                                                                            (
                                                                                Number(
                                                                                    (
                                                                                        2.0,
                                                                                        354..355,
                                                                                    ),
                                                                                ),
                                                                                354..355,
                                                                            ),
                                                                        ),
                                                                        349..355,
                                                                    ),
                                                                    (
                                                                        Block(
                                                                            [],
                                                                            [
                                                                                (
                                                                                    Echo(
                                                                                        (
                                                                                            "echo",
                                                                                            378..382,
                                                                                        ),
                                                                                        (
                                                                                            Number(
                                                                                                (
                                                                                                    3.0,
                                                                                                    383..384,
                                                                                                ),
                                                                                            ),
                                                                                            383..384,
                                                                                        ),
                                                                                    ),
                                                                                    378..384,
                                                                                ),
                                                                            ],
                                                                        ),
                                                                        356..402,
                                                                    ),
                                                                ),
                                                                349..402,
                                                            ),
                                                        ),
                                                        349..402,
                                                    ),
                                                    (
                                                        Else(
                                                            (
                                                                InlineElse(
                                                                    (
                                                                        "else",
                                                                        419..423,
                                                                    ),
                                                                    (
                                                                        Expression(
                                                                            (
                                                                                Number(
                                                                                    (
                                                                                        5.0,
                                                                                        425..426,
                                                                                    ),
                                                                                ),
                                                                                425..426,
                                                                            ),
                                                                        ),
                                                                        425..426,
                                                                    ),
                                                                ),
                                                                419..426,
                                                            ),
                                                        ),
                                                        419..426,
                                                    ),
                                                ],
                                            ),
                                            328..440,
                                        ),
                                    ],
                                ),
                                262..450,
                            ),
                        ),
                        262..450,
                    ),
                ),
                262..450,
            ),
        ],
    ),
    [
        found end of input at 74..75 expected something else,
        found "CmdText" at 115..122 expected "type",
        found end of input at 144..149 expected something else,
        found "{" at 164..165 expected "expression",
        found end of input at 170..171 expected something else,
    ],
)
